!function(e){"use strict";var a;e(document).ready(function(){a={template:{writeCSS:function(e,a){var t=$("#filter-template").html(),r=Handlebars.compile(t),o={filters:e,hoverState:a},i=r(o);$(".filter-css").html(r(o))},writeOverlay:function(e,a){var t=$("#overlay-template").html(),r=Handlebars.compile(t),o={myBlending:e,myGradient:a},i=r(o);$(".overlay-css").html(r(o))}},urlShare:{createURL:function(){$("[data-urlname]").change(function(){var e="",a="";$("[data-urlname]").each(function(){var t=$(this).data("urlname"),r=$(this).attr("value"),o=$(this).val(),i=o.replace(/\s/g,"");a=t+"="+i+"&",$(this).is(":disabled")===!1&&$(this).is(":visible")&&o!==r&&(e=a+e)});var t=$("input[name=overlay]:checked").val();t=t.substring(1),e="?"+e+"r="+t,window.history.replaceState(null,null,e)})},getURL:function(){var e={};if($.each(document.location.search.substr(1).split("&"),function(a,t){var r=t.split("=");e[r[0].toString()]=r[1].toString()}),$.each(e,function(e,a){var t="[data-urlname*='"+e+"']",r="[data-pair*='"+e+"']";console.log(t+" "+a),$(t).val(a),$(r).val(a)}),window.location.href.indexOf("r=")>-1){var t=String(e.r),r='input[value="#'+t+'"]';console.log(r),$(r).prop("checked",!0).change(),a.ui.updateColorPicker(".color1.text",".color1.picker")}window.location.href.indexOf("c2=")>-1&&a.ui.updateColorPicker(".color2.text",".color2.picker"),console.log(e),$("#sepia-a").change()}},ui:{sliders:function(){function e(e){var a=$(e).data("filter"),t="#"+a+"-a",r="#"+a+"-b";$(t).change(function(){var e=$(this).val();$(r).val(e)}),$(r).change(function(){var e=$(this).val();$(t).val(e)})}$("input[data-filter]").each(function(){e(this)})},onChangesEvents:function(){$("#contain input").change(function(){var e="",t="";$("input[type=range]").each(function(){var a=$(this).val(),r=$(this).data("filter"),o=$(this).attr("value"),i=$(this).data("additional");void 0==i&&(i="");var l=r+"("+a+i+") ",n=r+"("+o+") ";$(this).is(":disabled")===!1&&(e+=l,t+=n)}),a.template.writeCSS(e,t)})},newimage:function(){$("a[data-fullsize]").click(function(){event.preventDefault();var e=$(this).data("fullsize");$("#demoimage").attr("src",e),$(".preset img").attr("src",e),console.log(e)}),$("#imageURL").change(function(){var e=$(this).val();$("#demoimage").attr("src",e),$(".preset img").attr("src",e)})},showhidefilters:function(){$("label").click(function(){var e=$(this),a=$(this).data("filter");a="input[data-filter="+a+"]",$(a).is(":disabled")===!0?($(a).attr("disabled",!1),$("#sepia-a").change(),$(e).removeClass("disabled")):($(a).attr("disabled",!0),$(e).addClass("disabled"),$("#sepia-a").change())})},reset:function(){$("input[data-filter]").each(function(){var e=$(this).attr("value");$(this).val(e),a.ui.killOverlay(),$("#overlay-radio-none").prop("checked",!0)}),$("#sepia-a").change()},resetButton:function(){$("#reset").click(function(){a.ui.reset()})},activeOverlay:function(){$("input[type=radio][name=overlay]").change(function(){var e=$("input[type=radio][name=overlay]:checked").val();"#overlay-radio-none"==e?a.ui.killOverlay():($(".overlay-group").hide(),$(e).css("display","inline-block"),$("#blending-mode").css("display","inline-block"),$(".overlay-group input:visible").change())})},killOverlay:function(){$(".overlay-group").hide(),$("#filter .overlay-css").html(""),$("#overlay-css").html(""),$("#blending-mode").hide()},sorting:function(){$("#sortable").sortable({axis:"y",containment:"#contain",scroll:!1,stop:function(e,a){$("#sepia-a").change()}})},colorPick:function(){$("#overlay-solid-color .color").spectrum({preferredFormat:"rgb",showInput:!0,showAlpha:!0,showPalette:!1,color:"rgba(112,55,200, 0.4)",move:function(e){a.ui.updateColor("#overlay-solid-color-text",e)},hide:function(e){a.ui.updateColor("#overlay-solid-color-text",e)}}),$("#overlay-linear-gradient-color1").spectrum({preferredFormat:"rgb",showInput:!0,showAlpha:!0,showPalette:!1,color:"rgba(255, 0, 134, 0.4)",move:function(e){a.ui.updateColor("#overlay-linear-gradient-color1-text",e)},hide:function(e){a.ui.updateColor("#overlay-linear-gradient-color1-text",e)}}),$("#overlay-linear-gradient-color2").spectrum({preferredFormat:"rgb",showInput:!0,showAlpha:!0,showPalette:!1,color:"rgba(16, 255, 0, 0.4)",move:function(e){a.ui.updateColor("#overlay-linear-gradient-color2-text",e)},hide:function(e){a.ui.updateColor("#overlay-linear-gradient-color2-text",e)}}),$("#overlay-radial-gradient-color1").spectrum({preferredFormat:"rgb",showInput:!0,showAlpha:!0,showPalette:!1,color:"rgba(100, 10, 10, 0.9)",move:function(e){a.ui.updateColor("#overlay-radial-gradient-color1-text",e)},hide:function(e){a.ui.updateColor("#overlay-radial-gradient-color1-text",e)}}),$("#overlay-radial-gradient-color2").spectrum({preferredFormat:"rgb",showInput:!0,showAlpha:!0,showPalette:!1,color:"rgba(83, 10, 100, 0.9)",move:function(e){a.ui.updateColor("#overlay-radial-gradient-color2-text",e)},hide:function(e){a.ui.updateColor("#overlay-radial-gradient-color2-text",e)}}),$(".overlay-solid-color").change(function(){var e=$("#overlay-solid-color-text").val(),t=$("#blending-mode").val();a.template.writeOverlay(t,e)}),$(".overlay-linear-gradient-color").change(function(){var e=$("#overlay-linear-gradient-color1-text").val(),t=$("#overlay-linear-gradient-color2-text").val(),r=$("#blending-mode").val(),o="linear-gradient(to bottom,"+e+" 0%, "+t+" 100%);";a.template.writeOverlay(r,o)}),$(".overlay-radial-gradient-color").change(function(){var e=$("#overlay-radial-gradient-color1-text").val(),t=$("#overlay-radial-gradient-color2-text").val(),r=$("#blending-mode").val(),o="radial-gradient(ellipse at center, "+e+" 0%, "+t+" 100%);";a.template.writeOverlay(r,o)})},presetSet:function(e,a){var t="#"+e+"-a",r="#"+e+"-b";void 0!==a?($(t).val(a),$(r).val(a)):(a=$(t).attr("value"),$(t).val(a),$(r).val(a))},gradientCheck:function(e){var t=$(e).data("gradient");t='[value="'+t+'"]',$("input[name=overlay]").filter(t).prop("checked",!0);var r=$(e).data("color1"),o=$(e).data("color2");$(".overlay-group input.color1").val(r),$(".overlay-group input.color2").val(o);var i=$(e).data("blending-mode");$("#blending-mode").val(i),a.ui.updateColorPicker(".overlay-group input.color1.text",".overlay-group input.color1.picker"),a.ui.updateColorPicker(".overlay-group input.color2.text",".overlay-group input.color2.picker")},updateColorPicker:function(e,a){$(a).spectrum("set",$(e).val())},updateColor:function(e,a){$(e).val(a?a:""),$(e).change()},flipDemoImage:function(){$(".css-tab").click(function(){event.preventDefault();var e=$(this);e.text()==e.data("text-swap")?(e.text(e.data("text-original")),$(this).parent().removeClass("flip")):(e.data("text-original",e.text()),e.text(e.data("text-swap")),$(this).parent().addClass("flip")),$(".filter-parent").toggleClass("flip")})},presets:function(){$(".preset").click(function(){event.preventDefault(),a.ui.reset();var e={};e=$(this).data(),$.each(e,function(e,t){a.ui.presetSet(e,t)}),a.ui.gradientCheck(this),$("#sepia-a").change(),$("input[type=radio]").change()})}}},a.ui.sliders(),a.ui.onChangesEvents(),a.ui.sorting(),a.ui.showhidefilters(),a.ui.resetButton(),a.ui.presets(),a.ui.newimage(),a.ui.activeOverlay(),a.ui.colorPick(),a.ui.flipDemoImage(),a.urlShare.createURL(),a.urlShare.getURL()})}(jQuery);